<div class="records-container">
    <!-- Header -->
    <div class="records-header">
        <h1 class="header-title">सभी रिकॉर्ड</h1>
        <p class="header-subtitle">कुल {{ recordCount() }} रिकॉर्ड मिले</p>
    </div>

    <!-- Search Box -->
    <mat-card class="search-card">
        <mat-form-field appearance="outline" class="search-field">
            <mat-label>खोजें</mat-label>
            <input matInput type="text" [(ngModel)]="searchQuery" (ngModelChange)="onSearch()" placeholder="नाम, नंबर या तारीख से खोजें" />
            <mat-icon matPrefix>search</mat-icon>
        </mat-form-field>
    </mat-card>

    <!-- Records List -->
    <div class="records-list">
        <!-- Empty State -->
        <div *ngIf="recordCount() === 0" class="empty-state">
            <mat-icon class="empty-icon">inbox</mat-icon>
            <h3 class="empty-title">कोई रिकॉर्ड नहीं मिला</h3>
            <p class="empty-subtitle">
                {{ searchQuery() ? 'खोज को बदलकर दोबारा कोशिश करें' : 'नई एंट्री जोड़ने के लिए "नई एंट्री" टैब पर जाएं' }}
            </p>
        </div>

        <!-- Record Cards -->
        <div *ngFor="let record of filteredRecords()" class="record-card-wrapper">
            <!-- Compact View -->
            <mat-card class="record-card" [class.expanded]="isExpanded(record.id)" (click)="toggleExpand(record.id)">
                <div class="record-compact">
                    <div class="record-left">
                        <div class="farmer-avatar">
                            {{ getInitial(record.farmerName) }}
                        </div>
                        <div class="farmer-info">
                            <div class="farmer-name">{{ record.farmerName }}</div>
                            <div class="farmer-contact">
                                <mat-icon class="contact-icon">phone</mat-icon>
                                <span>{{ record.contactNumber }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="record-right">
                        <div class="pending-badge" [class.paid]="record.pendingAmount <= 0" [class.pending]="record.pendingAmount > 0">
                            {{ record.pendingAmount
                            <=0 ? 'पूरा भुगतान' : formatCurrency(record.pendingAmount) }} </div>
                                <mat-icon class="expand-icon">
                                    {{ isExpanded(record.id) ? 'expand_less' : 'expand_more' }}
                                </mat-icon>
                        </div>
                    </div>

                    <!-- Expanded Details -->
                    <div *ngIf="isExpanded(record.id)" class="record-details">
                        <div class="details-grid">
                            <div class="detail-item">
                                <span class="detail-label">तारीख</span>
                                <span class="detail-value">{{ record.date }}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">ज़मीन (एकड़)</span>
                                <span class="detail-value">{{ record.landInAcres }}</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-label">प्रति एकड़ दर</span>
                                <span class="detail-value">{{ formatCurrency(record.ratePerAcre) }}</span>
                            </div>
                            <div class="detail-item highlight">
                                <span class="detail-label">कुल राशि</span>
                                <span class="detail-value">{{ formatCurrency(record.totalPayment) }}</span>
                            </div>
                            <div class="detail-item highlight">
                                <span class="detail-label">नकद भुगतान</span>
                                <span class="detail-value">{{ formatCurrency(record.nakadPaid) }}</span>
                            </div>
                            <div class="detail-item" [class.warning]="record.pendingAmount > 0" [class.success]="record.pendingAmount <= 0">
                                <span class="detail-label">बकाया राशि</span>
                                <span class="detail-value">{{ formatCurrency(record.pendingAmount) }}</span>
                            </div>
                            <div *ngIf="record.fullPaymentDate" class="detail-item">
                                <span class="detail-label">पूरा भुगतान तारीख</span>
                                <span class="detail-value">{{ record.fullPaymentDate }}</span>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="record-actions">
                            <button mat-stroked-button color="primary" (click)="editRecord(record); $event.stopPropagation()">
              <mat-icon>edit</mat-icon>
              संपादित करें
            </button>
                            <button mat-stroked-button color="warn" (click)="deleteRecord(record.id); $event.stopPropagation()">
              <mat-icon>delete</mat-icon>
              हटाएं
            </button>
                        </div>
                    </div>
            </mat-card>
            </div>
        </div>
    </div>